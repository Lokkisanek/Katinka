<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SloÅ¾ si naÅ¡i fotku</title>
  <link href="style-clean.css" rel="stylesheet" />
  <link href="game3.css" rel="stylesheet" />
</head>
<body>
  <div class="bg-paper"></div>

  <main class="page puzzle-page">
    <h1 class="puzzle-title">SloÅ¾ si naÅ¡i nejoblÃ­benÄ›jÅ¡Ã­ fotku ğŸ’•</h1>
    <p class="puzzle-subtitle">RozhÃ¡zej to a zkus to sloÅ¾it!</p>

    <div class="game-stats">
      <div class="stat">
        <span class="stat-label">PoÄet pohybÅ¯</span>
        <span class="stat-value" id="movesCount">0</span>
      </div>
    </div>

    <div class="puzzle-container">
      <div class="puzzle-grid" id="puzzleGrid">
        <!-- Tiles generated by JS -->
      </div>
      <div class="puzzle-preview">
        <p class="preview-label">CÃ­l:</p>
        <img src="assets/images/nase-spolecna-fotka.jpg" alt="NaÅ¡e fotka" id="previewImage" />
      </div>
    </div>

    <div class="game-actions">
      <button class="btn btn-primary" id="shuffleBtn">ğŸ”€ ZamÃ­chat</button>
      <a href="menu.html" class="btn btn-ghost">â† ZpÄ›t do menu</a>
    </div>
  </main>

  <!-- Win modal -->
  <div class="win-modal" id="winModal">
    <div class="win-content">
      <h2>ğŸ‰ DokÃ¡zala jsi to! ğŸ‰</h2>
      <p class="win-text">Takhle nÃ¡m to spolu sluÅ¡Ã­ nejvÃ­c. ğŸ’•</p>
      <div class="win-stats">
        <div class="win-stat">
          <span class="win-stat-value" id="finalMoves">0</span>
          <span class="win-stat-label">pohybÅ¯</span>
        </div> 
      </div>
      <img src="assets/images/nase-spolecna-fotka.jpg" alt="NaÅ¡e fotka" class="win-photo" />
      <a href="gift3.html" clarss="btn btn-ghost">â† ZpÄ›t do menu</a>
    </div>
  </div>

  <script src="game3.js"></script>
  <script>
    // Mark game3 as completed when win modal shows
    const observer = new MutationObserver(() => {
      if (document.getElementById('winModal').classList.contains('show')) {
        const games = JSON.parse(localStorage.getItem('completedGames') || '[]');
        if (!games.includes('game3')) {
          games.push('game3');
          localStorage.setItem('completedGames', JSON.stringify(games));
        }
      }
    });
    observer.observe(document.getElementById('winModal'), { attributes: true, attributeFilter: ['class'] });
  </script>
</body>
</html>
